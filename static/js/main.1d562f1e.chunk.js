(this.webpackJsonpgovernable=this.webpackJsonpgovernable||[]).push([[0],{200:function(e,t,n){e.exports=n(338)},207:function(e,t,n){},208:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},209:function(e,t,n){},337:function(e,t,n){e.exports=n.p+"static/media/ABOUT.2616be68.md"},338:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=(n(339),n(24)),l=n.n(o),c=(n(207),n(21)),i=n(70),s=n(11),u=(n(208),n(209),n(91)),m=n(419),p=n(371),d=n(370),f=n(418),g=n(175),v=n.n(g),E=n(27),h=n(28);function b(){var e=Object(E.a)(["\n  box-sizing: border-box;\n  margin: 0 auto;\n  max-width: 1800px;\n  width: 100%;\n  padding: 0 24px;\n"]);return b=function(){return e},e}var x=h.a.div(b()),y=function(e){var t=e.children;return r.a.createElement(x,null,t)},w=n(422),j=n(180),O=n.n(j),k=n(179),C=n.n(k);function F(){var e=Object(E.a)(["\n  align-items: center;\n  color: #FFF;\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  position: relative;\n"]);return F=function(){return e},e}function _(){var e=Object(E.a)(["\n  align-items: center;\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: center;\n"]);return _=function(){return e},e}function N(){var e=Object(E.a)(["\n  background: #000;\n  display: flex;\n  margin-top: -80px;\n  min-height: calc(50vh - 80px);\n  position: relative;\n  touch-action: none;\n"]);return N=function(){return e},e}var S=h.a.div(N()),I=h.a.div(_()),A=h.a.div(F()),R=function(e){var t=e.proposal,n=t.id,o=t.title,l=Object(a.useContext)(Be),c=l.setCurrentProposal,i=l.proposals;return r.a.createElement(S,{id:"hero"},r.a.createElement(A,null,r.a.createElement(I,null,r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("h2",{style:{margin:0,padding:0,fontSize:"2vmax",fontWeight:500,textShadow:"0px 4px 4px black"}},"Compound Divided")),r.a.createElement("div",{style:{display:"flex"}},n>1?r.a.createElement(w.a,{style:{float:"left",height:"20px"},onClick:function(){return n>1?c(n-1):null}},r.a.createElement(C.a,{style:{color:"#FFF",fontSize:24}})):null,r.a.createElement("h2",{style:{margin:0,padding:0,fontSize:"1vmax",fontWeight:500,textShadow:"0px 4px 4px black",display:"flex"}},r.a.createElement("div",null,r.a.createElement("a",{style:{color:"grey"}},("00"+n).slice(-3)),"  ",o)),n<i.length?r.a.createElement(w.a,{style:{float:"right",height:"20px"},onClick:function(){return n<i.length?c(n+1):null}},r.a.createElement(O.a,{style:{color:"#FFF",fontSize:24}})):null)),r.a.createElement("div",{style:{position:"relative",top:-80}})))},W=n(191),P=n(420),z=Object(d.a)((function(e){return{tokenIcon:{alignItems:"center",backgroundColor:e.palette.grey[400],borderRadius:48,display:"flex",height:44,width:44}}})),B=function(e){var t=e.src,n=(e.alt,z());return r.a.createElement("img",{className:n.tokenIcon,src:t,alt:""})},D=function(e){return e.toString().split(".")[0].replace(/\B(?=(\d{3})+(?!\d))/g,",")},T=Object(d.a)((function(e){return{progressBar:{height:"30px",width:"100%"},bar:{position:"absolute",height:10,borderRadius:5}}})),L=function(e){var t=e.side,n=e.percentage,a=e.voteCount,o=e.color,l=T(),c=void 0!==a?D(a):"";return r.a.createElement(P.a,{className:l.progressBar},r.a.createElement("div",{style:{width:"100%",height:"30px"}},r.a.createElement("h3",{style:{float:"left"}},t),r.a.createElement("h3",{style:{float:"right"}},n,"% ",r.a.createElement("span",{style:{fontWeight:"normal"}},"(",c,")"))),r.a.createElement("div",{style:{position:"relative",marginTop:20}},r.a.createElement("div",{className:l.bar,style:{width:"100%",background:"lightgrey",right:0}}),r.a.createElement("div",{className:l.bar,style:{width:"".concat(n,"%"),background:o}})))},M=Object(d.a)((function(e){return{headerRow:{alignItems:"center",borderBottom:"1px solid ".concat(e.palette.grey[100]),height:80,paddingLeft:24,paddingRight:24,"&:hover":{}}}})),V=function(e){var t=e.children,n=M();return r.a.createElement(P.a,{className:n.headerRow},t)},H=Object(d.a)((function(e){return{row:{alignItems:"center",borderBottom:"1px solid ".concat(e.palette.grey[100]),display:"flex",height:50,paddingLeft:24,paddingRight:24,"&:hover":{}}}})),G=function(e){var t=e.children,n=H();return r.a.createElement(P.a,{className:n.row},t)},J=Object(d.a)((function(e){return{name:{marginLeft:e.spacing(2)},tokenCell:{alignItems:"center",display:"flex",flex:1}}})),q=function(e){var t=e.name,n=e.tokenIcon,a=J();return r.a.createElement(P.a,{className:a.tokenCell},n,r.a.createElement("span",{className:a.name},t))},U=Object(d.a)((function(e){return{tflCell:{fontWeight:300}}})),Y=function(e){var t=e.time,n=U();return r.a.createElement(P.a,{className:n.tflCell},t)},$=Object(d.a)((function(e){return{tflCell:{fontWeight:500,width:140}}})),K=function(e){var t=e.amount,n=$();return r.a.createElement(P.a,{className:n.tflCell},D(t))},Q=function(e){var t=e.side,n=e.percentage,o=e.voteCount,l=e.color,c=Object(a.useContext)(Be),i=c.voters,s=c.setModal,u=i.filter((function(e){return"For"===t?!0===e.support:!1===e.support})).sort((function(e,t){return t.votes-e.votes}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{key:"Votes"},r.a.createElement(L,{side:t,percentage:n,voteCount:o,color:l})),r.a.createElement(G,{key:"Header"},r.a.createElement(q,{name:"Address"}),r.a.createElement(K,{amount:"Votes"}),r.a.createElement(Y,{time:"Time"})),u.slice(0,4).map((function(e,t){var n=e.display_name?e.display_name:e.address.slice(0,10);return r.a.createElement(G,{key:e.address},r.a.createElement(q,{name:n,tokenIcon:r.a.createElement(B,{src:e.image_url,alt:n})}),r.a.createElement(K,{amount:e.votes}),r.a.createElement(Y,{time:e.time}))})),u.length>4?r.a.createElement(G,{key:"Expand"},r.a.createElement(P.a,{style:{margin:"0 auto",fontWeight:500},onClick:function(e){return s(t)}},"Show More")):"")},X={stick:{position:"sticky",top:"20px"}},Z=function(e){var t=e.tweets,n=e.side,a=e.percentage,o=e.voteCount,l=e.color;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:0===t.length?X.stick:{}},r.a.createElement(p.a,{elevation:3,style:{minWidth:"400px"}},r.a.createElement(Q,{side:n,percentage:a,voteCount:o,color:l})),r.a.createElement("br",null),r.a.createElement("div",null,'Latest "',n,'" Tweets (',t.length,")")),t.map((function(e,n){return r.a.createElement("div",{key:n,style:n===t.length-1?X.stick:{}},r.a.createElement(W.a,{tweetId:e}))})))},ee=n(74),te=n(181),ne=function(e){var t=e.voters,n={address:"All Votes",color:"#ffe0c7",children:[{address:"Pro",color:"#04D394",children:t.filter((function(e){return!0===e.support})).map((function(e){return Object(ee.a)(Object(ee.a)({},e),{},{color:"yellow"})}))},{address:"Neg",color:"#DE5F67",children:t.filter((function(e){return!1===e.support})).map((function(e){return Object(ee.a)(Object(ee.a)({},e),{},{color:"#DE5F67"})}))}]},a=t.reduce((function(e,t){return e+(!0===t.support?t.votes:0)}),0),o=t.reduce((function(e,t){return e+(!1===t.support?t.votes:0)}),0);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{height:"500px"}},r.a.createElement(te.a,{root:n,margin:{top:20,right:20,bottom:20,left:20},identity:"address",value:"votes",colors:function(e){return e.color},padding:6,label:function(e){var n=t.find((function(t){return t.address===e.id}));return n&&null!=n.display_name?n.display_name:e.id.slice(0,5)},labelTextColor:"black",borderWidth:2,borderColor:{from:"color"},defs:[{id:"lines",type:"patternLines",background:"none",color:"inherit",rotation:-45,lineWidth:5,spacing:8}],fill:[{match:{depth:1},id:"lines"}],animate:!1,tooltip:function(e){var t=-1===["All Votes","Pro","Neg"].indexOf(e.id),n=e.value/(e.data.support?a:o)*100;t||(n=e.value/(a+o)*100);var l=D(e.value);return r.a.createElement("div",{style:{display:"inline-flex"}},t?r.a.createElement(B,{src:e.data.image_url,style:{float:"left"}}):"",r.a.createElement("div",{style:{textAlign:"left"}},r.a.createElement("strong",null,e.label||e.id,":"),r.a.createElement("div",null,l," (",n.toFixed(2),"%)"),t?r.a.createElement("div",null,"date",": ",e.data.time):""))}})))},ae=n(421),re=n(413),oe=n(417),le=n(416),ce=n(412),ie=n(414),se=n(415),ue=Object(d.a)((function(e){return{table:{padding:20},headerRow:{fontWeight:700},tableContainer:{maxHeight:"calc(100% - 200px)",margin:"100px",background:"white",overflowY:"auto"}}})),me=function(e){var t=e.row,n=t.address,a=t.display_name,o=t.votes,l=t.time,c=o.toString().split(".")[0].replace(/\B(?=(\d{3})+(?!\d))/g,",");return r.a.createElement(se.a,{key:n},r.a.createElement(le.a,{component:"th",scope:"row"},a||n),r.a.createElement(le.a,{align:"right"},n),r.a.createElement(le.a,{align:"right"},c),r.a.createElement(le.a,{align:"right"},l))},pe=function(){var e=Object(a.useContext)(Be),t=e.modal,n=e.setModal,o=e.voters,l="For"===t||"Against"===t,c=o.filter((function(e){return"For"===t?!0===e.support:!1===e.support})).sort((function(e,t){return t.votes-e.votes})),i=ue();return r.a.createElement(ae.a,{open:l,onClose:function(){n(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},r.a.createElement("div",{className:i.tableContainer},r.a.createElement(ce.a,{component:p.a},r.a.createElement(re.a,{className:i.table,"aria-label":"simple table"},r.a.createElement(ie.a,null,r.a.createElement(se.a,null,r.a.createElement(le.a,{className:i.headerRow},"Name"),r.a.createElement(le.a,{className:i.headerRow,align:"right"},"Address"),r.a.createElement(le.a,{className:i.headerRow,align:"right"},"Votes"),r.a.createElement(le.a,{className:i.headerRow,align:"right"},"Date"))),r.a.createElement(oe.a,null,c.map((function(e,t){return r.a.createElement(me,{row:e,key:t})})))))))},de=Object(d.a)((function(e){return{paper:{padding:20,textAlign:"center",fontFamily:"Roboto"},mainGraph:{position:"relative",top:"-2vh"}}})),fe=function(){var e=Object(a.useContext)(Be),t=e.tweets,n=e.proposals,o=e.setCurrentProposal,l=e.currentProposal,c=e.voters,i=Object(s.g)().proposalNum;Object(a.useEffect)((function(){Number.isInteger(parseInt(i))&&i!==l&&o(parseInt(i))}),[i]);var d=n.find((function(e){return e.id===l}))||{},g=t.find((function(e){return e.id===l}))||{},E=function(e){return(parseFloat(e)/(parseFloat(d.for_votes)+parseFloat(d.against_votes))*100).toFixed(2)},h=(new v.a.Converter,Object(f.a)("(min-width:1280px)"));return console.log(h),r.a.createElement(r.a.Fragment,null,r.a.createElement(R,{proposal:d}),r.a.createElement(pe,null),r.a.createElement(y,null,r.a.createElement("div",{style:{marginTop:-68,position:"relative"}},r.a.createElement(m.a,{container:!0,spacing:3},r.a.createElement(m.a,{item:!0,xs:10,sm:6,lg:3},r.a.createElement(Z,{side:"For",percentage:E(d.for_votes),voteCount:d.for_votes,color:"#04D394",tweets:g.pro||[]})),r.a.createElement(m.a,Object(u.a)({item:!0,xs:12,lg:6,style:de.mainGraph},"style",{order:h?null:"-1"}),r.a.createElement("div",{style:{position:"sticky",top:20}},r.a.createElement(p.a,{className:de.paper,elevation:3,style:{minWidth:"400px"}},c.length>0?r.a.createElement(ne,{voters:c}):null))),r.a.createElement(m.a,{item:!0,xs:10,sm:6,lg:3},r.a.createElement(Z,{side:"Against",percentage:E(d.against_votes),voteCount:d.against_votes,color:"#DE5F67",tweets:g.neg||[]}))))))},ge=n(188),ve=n.n(ge),Ee={paper:{margin:"20px",fontFamily:"Roboto",padding:"10px 20px 20px 20px"}},he=function(){var e=Object(a.useState)(""),t=Object(c.a)(e,2),o=t[0],l=t[1];return Object(a.useEffect)((function(){var e=n(337);fetch(e).then((function(e){return e.text()})).then((function(e){l(ve()(e))}))}),[]),r.a.createElement(y,null,r.a.createElement(m.a,{item:!0,xs:5},r.a.createElement(p.a,{elevation:3,style:Ee.paper},r.a.createElement("article",{dangerouslySetInnerHTML:{__html:o}}))))},be=n(132),xe=n.n(be),ye=n(189),we=n.n(ye),je=n(190),Oe=n.n(je);function ke(){var e=Object(E.a)(["\n  align-items: center;\n  display: flex;\n  margin: 0 -12px;\n"]);return ke=function(){return e},e}function Ce(){var e=Object(E.a)(["\n  color: #FFF;\n  padding: 0 12px;\n  text-decoration: none;\n"]);return Ce=function(){return e},e}function Fe(){var e=Object(E.a)(["\n  background-color: ",";\n  color: #FFF;\n"]);return Fe=function(){return e},e}function _e(){var e=Object(E.a)(["\n  align-items: center;\n  display: flex;\n  font-size: 24px;\n  font-weight: 700;\n"]);return _e=function(){return e},e}function Ne(){var e=Object(E.a)(["\n  align-items: center;\n  display: flex;\n  height: 80px;\n  justify-content: space-between;\n  position: relative;\n  z-index: 2;\n"]);return Ne=function(){return e},e}var Se=h.a.div(Ne()),Ie=h.a.div(_e()),Ae=h.a.header(Fe(),(function(e){return e.transparent?"transparent":"black"})),Re=Object(h.a)(i.b)(Ce()),We=h.a.nav(ke()),Pe=function(){return r.a.createElement(Ae,{transparent:!1},r.a.createElement(y,null,r.a.createElement(Se,null,r.a.createElement(Re,{to:"/"},r.a.createElement(Ie,null,r.a.createElement(xe.a,{style:{position:"relative",top:"-2px"}}),r.a.createElement(xe.a,{style:{transform:"rotate(180deg)",position:"relative",top:"2px"}}),r.a.createElement("div",{style:{width:4}}),r.a.createElement("span",null,"A House Divided"))),r.a.createElement(We,null,r.a.createElement(Re,{to:"/Compound"},"Compound"),r.a.createElement(Re,{to:"/about"},"About"),r.a.createElement(w.a,{onClick:function(){return window.open("https://github.com/lsquaredleland/governable","_blank")}},r.a.createElement(we.a,{style:{color:"white"}})),r.a.createElement(w.a,{onClick:function(){return window.open("https://twitter.com/compcabal","_blank")}},r.a.createElement(Oe.a,{style:{color:"white"}}))))))},ze=[{id:1,pro:["1254846366506905601","1254899993443471360","1256090650170327041"],neg:["1254669301308506113","1255235435447685120","1255181493279707136","1255609457519652864"]},{id:2,pro:[],neg:["1255609457519652864"],abstrain:["1256313098723569664"]},{id:3,pro:["1260986319972429824"],neg:[]},{id:4,pro:[],neg:[]},{id:7,pro:["1270905785149583360"],neg:[]},{id:8,pro:["1274577400232153100","1273706416973512706"],neg:[]},{id:9,pro:[],neg:["1274041263214354432","1274577400232153100","1274579517143580672","1273706416973512706"]},{id:10,pro:[],neg:["1275866632720695296","1275860060606828546","1275410411152539654"]}],Be=r.a.createContext({}),De=function(e){var t=e.currentProposal,n=Object(s.h)();return r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"".concat(n.path,"/:proposalNum")},r.a.createElement(fe,null)),r.a.createElement(s.b,{exact:!0,path:n.path},r.a.createElement(s.a,{to:"/Compound/".concat(t)})))},Te=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],o=t[1],l=Object(a.useState)([]),u=Object(c.a)(l,2),m=u[0],p=u[1],d=Object(a.useState)([]),f=Object(c.a)(d,2),g=f[0],v=f[1],E=Object(a.useState)(),h=Object(c.a)(E,2),b=h[0],x=h[1],y=Object(a.useState)(void 0),w=Object(c.a)(y,2),j=w[0],O=w[1],k=Object(a.useState)(!1),C=Object(c.a)(k,2),F=C[0],_=C[1];return Object(a.useEffect)((function(){if(!1!==F)if(Number.isInteger(b)){var e="?proposal_id=".concat(b,"&page_size=100");fetch("https://api.compound.finance/api/v2/governance/proposal_vote_receipts"+e).then((function(e){return e.json()})).then((function(e){console.log("result",e);var t=e.proposal_vote_receipts.map((function(e){var t=e.support,n=e.votes,a=e.voter;return{support:t,address:a.address,display_name:a.display_name,image_url:a.image_url,votes:parseFloat(n),time:"4/27 - 12:00"}}));p(t)}),(function(e){console.log(e)}))}else x(g.length)}),[b,F]),Object(a.useEffect)((function(){o(ze);fetch("https://api.compound.finance/api/v2/governance/proposals?with_detail=true&page_size=100").then((function(e){return e.json()})).then((function(e){console.log("proposals",e),v(e.proposals),_(!0)}),(function(e){console.log(e)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,null,r.a.createElement(Pe,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/about"},r.a.createElement(he,null)),r.a.createElement(s.b,{exact:!0,path:"/"},r.a.createElement(s.a,{to:"/Compound"})),r.a.createElement(s.b,{path:"/Compound"},r.a.createElement(Be.Provider,{value:{tweets:n,proposals:g,currentProposal:b,setCurrentProposal:x,voters:m,modal:j,setModal:O}},r.a.createElement("div",{className:"App"},r.a.createElement(De,{currentProposal:b})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[200,1,2]]]);
//# sourceMappingURL=main.1d562f1e.chunk.js.map